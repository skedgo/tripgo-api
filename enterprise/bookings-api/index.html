<!doctype html>
<html lang="en">
  <head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />

      

      
        <meta name="author" content="SkedGo Pty Ltd" />
      

      
        <link rel="canonical" href="https://developer.tripgo.com/enterprise/bookings-api/" />
      
      <link
        rel="apple-touch-icon"
        sizes="57x57"
        href="../../img/favicon/apple-icon-57x57.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="60x60"
        href="../../img/favicon/apple-icon-60x60.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="72x72"
        href="../../img/favicon/apple-icon-72x72.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="76x76"
        href="../../img/favicon/apple-icon-76x76.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="114x114"
        href="../../img/favicon/apple-icon-114x114.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="120x120"
        href="../../img/favicon/apple-icon-120x120.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="144x144"
        href="../../img/favicon/apple-icon-144x144.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="152x152"
        href="../../img/favicon/apple-icon-152x152.png"
      />
      <link
        rel="apple-touch-icon"
        sizes="180x180"
        href="../../img/favicon/apple-icon-180x180.png"
      />
      <link
        rel="icon"
        type="image/png"
        sizes="192x192"
        href="../../img/favicon/android-icon-192x192.png"
      />
      <link
        rel="icon"
        type="image/png"
        sizes="32x32"
        href="../../img/favicon/favicon-32x32.png"
      />
      <link
        rel="icon"
        type="image/png"
        sizes="96x96"
        href="../../img/favicon/favicon-96x96.png"
      />
      <link
        rel="icon"
        type="image/png"
        sizes="16x16"
        href="../../img/favicon/favicon-16x16.png"
      />
      <link rel="manifest" href="../../img/favicon/manifest.json" />
      <meta name="msapplication-TileColor" content="#154c7b" />
      <meta
        name="msapplication-TileImage"
        content="../../img/favicon/ms-icon-144x144.png"
      />
      <meta name="theme-color" content="#154c7b" />
      <title>
        
          Bookings
          -
        TripGo Developer
      </title>
      <link rel="stylesheet" href="../../css/main.css" />

      <link rel="stylesheet" href="../../css/main-above.css" />
      <link
        rel="stylesheet"
        href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github.min.css"
      />
      <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
      <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->
      <script>
        var base_url = "../..";
      </script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="../../js/app.min.js"></script>
        <script src="../../search/main.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
        <script>
          hljs.highlightAll();
        </script>
      <script
        async
        src="https://www.googletagmanager.com/gtag/js?id=G-C12N56MG8C"
      ></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() {
          dataLayer.push(arguments);
        }
        gtag("js", new Date());

        gtag("config", "G-C12N56MG8C");
      </script>

      <!-- Google Tag Manager -->
      <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-P5QG5P4T');</script>
      <!-- End Google Tag Manager -->

      <!-- Fathom - beautiful, simple website analytics --> <script src="https://cdn.usefathom.com/script.js" data-site="PRBVBCCQ" defer></script> <!-- / Fathom -->
  </head>

  <body >
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-P5QG5P4T" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <header class="navbar">
	
	<div class="search-container">
		<a class="search" href="#"></a><div class="search-form" id="mkdocs_search_modal" tabindex="-1" raria-labelledby="Search Modal" aria-hidden="true">
    <form role="form" class="container">
        <div class="search-icon"></div>
        <input type="text" class="search-field" placeholder="Type keyword..." id="mkdocs-search-query">
    </form>
    <div class="results-list">
    	<div id="mkdocs-search-results" class="container"></div>
    </div>
</div>
	</div>
	
	<div class="container-fluid flex">
		<a class="logo" href="../..">
			<img
				src="../../img/tripgo-api-logo-white.svg"
				alt="TripGo API Logo White"
				height="32"
				width="140"
			/>
		</a>

		<div class="divider"></div>
		<a class="menu-toggle" type="button" href="#" aria-hidden="true">
			<div class="bar-container">
				<span class="bar-1"></span>
				<span class="bar-2"></span>
				<span class="bar-3"></span>
			</div>
		</a>
		<div
			class="menu "
			aria-hidden="false"
		>
			
			<ul>
				 
				<li class="">
					<a href="../..">Getting Started</a>
				</li>
				  
				<li class="">
					<a href="../../faq/">F.A.Q.</a>
				</li>
				  
				<li class="">
					<a href="../../extensions/">Extensions</a>
				</li>
				  
				<li class="">
					<a href="/specs/">Reference</a>
				</li>
				  
				<li>
					<a href="#" class="dropdown">Enterprise</a>
					<ul class="submenu">
						
						<li class="">
							<a href="../push/"
								>Push Notifications</a
							>
						</li>
						
						<li class="">
							<a href="../tripurls/"
								>Trip URLs</a
							>
						</li>
						
						<li class="current">
							<a href="./"
								>Bookings</a
							>
						</li>
						
					</ul>
				</li>
				  
				<li>
					<a href="#" class="dropdown">Developer</a>
					<ul class="submenu">
						
						<li class="">
							<a href="https://developer.tripgo.com/"
								>Docs</a
							>
						</li>
						
						<li class="">
							<a href="https://developer.tripgo.com/specs"
								>API</a
							>
						</li>
						
						<li class="">
							<a href="https://android.developer.tripgo.com"
								>Android</a
							>
						</li>
						
						<li class="">
							<a href="https://ios.developer.tripgo.com"
								>iOS</a
							>
						</li>
						
						<li class="">
							<a href="https://react.developer.tripgo.com"
								>React</a
							>
						</li>
						
					</ul>
				</li>
				  
				<li class="">
					<a href="https://www.skedgo.com">SkedGo</a>
				</li>
				 
			</ul>
			
			<ul>
				<li>
					<a href="https://tripgo.3scale.net/login">Log in</a>
				</li>
				<li>
					<a href="https://tripgo.3scale.net/#plans">Sign up</a>
				</li>
			</ul>
		</div>
	</div>
</header>

    <div class="container -layout-3-9">
        <div class="col" role="complementary"><div class="sidebar hidden-print affix" role="complementary" id="sidebar">
	<div class="indicator"></div>
    <ul class="nav sidenav">
        <li class="main "><a href="#overview" class="active">Overview</a></li>
        <li class="main "><a href="#api-endpoints" class="">API Endpoints</a></li>
            <li><a href="#linking-and-unlinking-accounts" class="">Linking and unlinking accounts</a></li>
            <li><a href="#getting-available-tsp-for-a-trip" class="">Getting available TSP for a trip</a></li>
            <li><a href="#booking-a-segment" class="">Booking a segment</a></li>
            <li><a href="#updating-trip-with-booking-details" class="">Updating trip with booking details</a></li>
            <li><a href="#rating-and-tipping" class="">Rating and Tipping</a></li>
    </ul>
</div></div>
        <div class="col content" role="main">

<h1 id="overview">Overview</h1>
<p><strong>Note: Enterprise customers-only</strong></p>
<p><strong>Note: Beta-only</strong></p>
<p>The TripGo API allows making bookings for a handful of transport service providers (TSPs).</p>
<p>This enables your users to:</p>
<ul>
<li>Link their TSP accounts and keep credentials either stored on the client or server-side.</li>
<li>Get a list of available TSP products for a trip.</li>
<li>Book a specific TSP product for a single segment.</li>
<li>Update the trip with the details of the booked TSP product.</li>
<li>Update the trip with real-time data specific to that booking.</li>
</ul>
<p>Coming soon:</p>
<ul>
<li>Book a complete trip consisting of multiple products from multiple TSPs.</li>
</ul>
<p>In order to enable bookings for your TripGo API key, please <a href="mailto:api@skedgo.com">get in touch with our team</a>. For most TSPs, you will need to provide us with additional information of your API credentials.</p>
<hr />
<h1 id="api-endpoints">API Endpoints</h1>
<h2 id="linking-and-unlinking-accounts">Linking and unlinking accounts</h2>
<p>Before you can do any bookings, you will need to provide the relevant authentication details to the server.</p>
<p>If the user has an account (as per the <code>userToken</code> header), then this is only necessary once. If the user does not have an account, this is necessary for each session. Typically, the endpoints which do the bookings will tell you, if the session hasn't been authenticated yet.</p>
<ul>
<li><code>auth/{region}?mode={mode}</code>: Endpoint to get the available providers for a specific region, with the information to signin/logout if a <code>userToken</code> is provided in the headers. If <code>mode</code> is provided, only information for that mode is returned.</li>
<li><code>auth/{provider}/signin</code>: Endpoint to link an account for the specified provider.</li>
<li><code>auth/{provider}/logout</code>: Endpoint to unlink an account for the specified provider.</li>
</ul>
<h3 id="auth-flow">Auth Flow</h3>
<p>This flow will depend on the TSP and can be started in two separate ways:</p>
<ul>
<li>When <a href="#linking-and-unlinking-accounts">linking accounts</a> to a user.</li>
<li>When doing a <a href="#booking-a-segment">booking</a> for that particular TSP and the user has no account already linked.</li>
</ul>
<p>This flow will use the Auth Forms to provide the apps the information to show to the user and also the information required to be POSTed to continue the flow.</p>
<p>For a TSP that allows OAuth2, the Auth Form will include the fields with the information for the apps to do OAuth, including <code>clientId</code>, <code>clientSecret</code>, <code>scope</code>, <code>authUrl</code>, <code>tokenUrl</code>; and also the required field to be POSTed, including <code>accessToken</code>, <code>refreshToken</code> and <code>expiration</code>.</p>
<p>For a TSP that provides a different authentication method, the AuthForm will include the required field to be filled by the user and also any extra information that need to be shown to the user in the same field format. This will follow the same flow approach as for <a href="#form-based-booking-flow">Form-based Booking Flow</a>.</p>
<p>The end of this flow will depending on how it was started.
If was started to link an account, the flow will end with an empty 204 response, when successfuly linked.
If it was started in a booking flow, the flow will automatically continue with it, attempting to do the booking and returning the status, as in step 4 of <a href="#form-based-booking-flow">Form-based Booking Flow</a>.</p>
<hr />
<h2 id="getting-available-tsp-for-a-trip">Getting available TSP for a trip</h2>
<p>If there are available TSPs for a trip segment, this will be indicated by the presence of the booking object in the segment.</p>
<p>The booking object in the segment may include:</p>
<ul>
<li>a <code>quickBookingUrl</code>, indicating that the quick booking flow is available.</li>
</ul>
<hr />
<h2 id="booking-a-segment">Booking a segment</h2>
<p>Getting available TSP products for a trip</p>
<p>If quick booking flow is available for a segment, the available TSP products can be browsed for it without providing any authentication details. </p>
<p>As part of the quick booking flow, the quickBookingUrl will then return a list of available TSP products, which notably each come:</p>
<ul>
<li><code>tripUpdateURL</code>: A URL for fetching the trip, updated for this TSP product.</li>
<li><code>bookingURL</code>: A URL for initiating the booking flow for this TSP product (step 2 of <a href="#form-based-booking-flow">form-based booking flow</a>)</li>
<li>title</li>
<li>subtitle</li>
<li>bookingTitle</li>
<li>priceString</li>
<li>price</li>
<li>USDPrice</li>
<li>surgeString</li>
<li>surgeImageURL</li>
<li>ETA</li>
<li>imageURL</li>
</ul>
<hr />
<h2 id="updating-trip-with-booking-details">Updating trip with booking details</h2>
<p>At the end of the booking flow, you will get a <code>refreshURLForSourceObject</code>. Hit this URL with a GET request, to get the updated trip.</p>
<p>Note that these trips can be eligible for real-time updates even if the original trip was not eligible as there might now be additional real-time information based on the booking.</p>
<p>Trips with a confirmed booking will also have extra information about the confirmed booking in a field called <code>confirmation</code> in the <code>booking</code> field of the segment.</p>
<p>This <code>confirmation</code> object may include detailed information about the <code>provider</code>, <code>vehicle</code> and <code>status</code> for the booking, with the following possible fields:</p>
<ul>
<li>a <code>title</code></li>
<li>a <code>subtitle</code></li>
<li>a <code>valueUrl</code></li>
<li>a <code>value</code></li>
</ul>
<p>And also a list of possible actions depending on the status of the booking, with the following fields:</p>
<ul>
<li>a <code>title</code></li>
<li>a boolean <code>isDestructive</code>, indicating whether this action will cancel the booking.</li>
<li>a <code>internalUrl</code> indicating the action of the url is a call to the same server and will return a <code>bookingForm</code>.</li>
<li>a <code>externalUrl</code> indicating that the action must be handled by the app accordingly.</li>
</ul>
<p>Examples of actions with <code>internalUrl</code> fields are <code>cancel booking</code>, which will have the <code>isDestructive</code> field in true, and <code>rate booking</code>.</p>
<p>Examples of actions with <code>externalUrl</code> fields are <code>qrcode</code> values, for showing a ticket to the user, and phone numbers, starting with <code>tel:</code>.</p>
<hr />
<h2 id="rating-and-tipping">Rating and Tipping</h2>
<p>Whenever available, the confirmation information will include the <code>rate booking</code> action, which will include an <code>internalUrl</code> which will return the following fields:</p>
<ul>
<li><code>rate</code>, an int value with min and max accepted values.</li>
<li><code>feedback</code>, a string to send an appropriate msg.</li>
<li><code>tip</code>, an int value indicating the amount to be paid as tip, in local currency.</li>
</ul></div>
    </div>

    <div class="navbar-bottom" role="navigation">
	<div class="container -layout-6-6">
			    <div class="col">
			        <a rel="next" href="/enterprise/tripurls/" class="prev">
			            <div class="label">
			            	Previous
			            </div>
			            <div class="title">
			            	Trip URLs
			            </div>
			        </a>
			    </div>
			    <div class="disabled col">
			        <a rel="prev"  class="next">
			            <div class="label">
			            	Next
			            </div>
			            <div class="title">
			            	
			            </div>
			        </a>
			    </div>
	</div>
</div>
    <footer class="footer">
	<div class="logo">
		<img src="../../img/tripgo-api-logo-mono.svg" alt="TripGo Logo" width="134" height="34">
	</div>
	<ul class="menu">
		<li>
			<a href="https://www.skedgo.com">SkedGo website</a>
		</li>
		<li>
			<a href="https://skedgo.com/en/tripgo-api/pricing/">Pricing</a>
		</li>
		<li>
			<a href="https://github.com/skedgo/tripgo-api/issues">Report issue</a>
		</li>
		<li>
			<a href="mailto:api@tripgo.com">Email support</a>
		</li>
		<li>
			<a href="http://slack.tripgo.com/">Slack community</a>
		</li>
	</ul>
</footer>
  </body>
</html>